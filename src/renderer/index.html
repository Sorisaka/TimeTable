<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8">
  <title>ライブのタイムテーブル</title>
  <meta http-equiv="Content-Security-Policy"
        content="default-src 'self'; img-src 'self' data:; style-src 'self' 'unsafe-inline'; script-src 'self';">
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <link rel="stylesheet" href="./styles/main.css">
</head>
<body>
  <header class="app-header">
    <h1>ライブのタイムテーブル</h1>
    <div class="toolbar"><span class="hint">上部メニュー「ファイル」から操作</span></div>
  </header>

  <main class="layout">
    <section class="bands">
      <div class="band-group">
        <h2>複数日程に出演可</h2>
        <div id="band-multi" class="band-list"></div>
      </div>
      <div class="band-group">
        <h2>各日程専用</h2>
        <div id="band-perday" class="band-list"></div>
      </div>
    </section>

    <section class="timetable-wrap">
      <div id="timetable" class="timetable"></div>
    </section>
  </main>

  <footer class="app-footer"><small>© 2025 Live Timetable</small></footer>

  <!-- Modals -->
  <div id="modal-backdrop" class="modal-backdrop hidden" aria-hidden="true"></div>
  <div id="modal-new" class="modal hidden" role="dialog" aria-modal="true" aria-labelledby="modal-new-title">
    <div class="modal-card">
      <header class="modal-header">
        <h3 id="modal-new-title">新規プロジェクト作成</h3>
        <button class="btn ghost" data-close="modal-new" aria-label="閉じる">×</button>
      </header>
      <section class="modal-body">
        <div class="form-row">
          <label>タイトル</label><input id="wiz-title" type="text" placeholder="例: 6月ライブ"/>
        </div>
        <div class="form-row">
          <label>日程数</label>
          <input id="wiz-daycount" type="number" min="1" max="10" value="2"/>
          <button id="wiz-generate" class="btn">行を生成</button>
        </div>
        <div class="grid-head">
          <span>#</span><span>ライブ名</span><span>日付</span><span>場所</span>
          <span>スタート</span><span>IM本数</span><span>各長さ</span><span>デフォ演奏</span><span>完全撤収</span>
        </div>
        <div id="wiz-rows" class="rows scroll-y"></div>
      </section>
      <footer class="modal-footer">
        <button class="btn ghost" data-close="modal-new">キャンセル</button>
        <button id="wiz-create" class="btn primary">作成</button>
      </footer>
    </div>
  </div>

  <div id="modal-generic" class="modal hidden" role="dialog" aria-modal="true" aria-labelledby="modal-generic-title">
    <div class="modal-card">
      <header class="modal-header">
        <h3 id="modal-generic-title">操作</h3>
        <button class="btn ghost" data-close="modal-generic" aria-label="閉じる">×</button>
      </header>
      <section class="modal-body">
        <p id="modal-generic-desc" class="muted"></p>
        <div id="modal-generic-actions" class="actions"></div>
      </section>
      <footer class="modal-footer">
        <button class="btn ghost" data-close="modal-generic">閉じる</button>
      </footer>
    </div>
  </div>

  <!-- Domain/Application (browser globals) -->
  <script src="../domain/scheduleOps.js"></script>
  <script src="../application/scheduleService.js"></script>

  <!-- UI components & controller -->
  <script src="./js/components/ModalManager.js"></script>
  <script src="./js/components/BandBlock.js"></script>
  <script src="./js/components/TimetableView.js"></script>
  <script src="./js/controllers/AppController.js"></script>
</body>
</html>
